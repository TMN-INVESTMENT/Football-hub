<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Football Matches</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding-bottom: 40px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 0 30px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 40px;
            background: rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #ff8a00, #e52e71, #9b59b6, #3498db);
        }
        
        h1 {
            font-size: 3.2rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #ff8a00, #e52e71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #aaa;
            margin-bottom: 20px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn.active {
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            box-shadow: 0 5px 15px rgba(255, 138, 0, 0.4);
        }
        
        .btn i {
            font-size: 1.1rem;
        }
        
        .status-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e74c3c;
            animation: pulse 1.5s infinite;
        }
        
        .status-dot.active {
            background: #2ecc71;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .matches-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }
        
        .match-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .match-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .match-card.live::before {
            content: "LIVE";
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            letter-spacing: 1px;
            animation: pulse 1.5s infinite;
        }
        
        .competition {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .competition img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: contain;
        }
        
        .competition-name {
            font-weight: 600;
            color: #ddd;
            font-size: 1.1rem;
        }
        
        .match-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 40%;
            text-align: center;
        }
        
        .team-logo {
            width: 60px;
            height: 60px;
            margin-bottom: 10px;
            object-fit: contain;
        }
        
        .team-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .team-code {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .score {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(to right, #ff8a00, #e52e71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            min-width: 80px;
            text-align: center;
        }
        
        .match-time {
            text-align: center;
            color: #aaa;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        .match-status {
            text-align: center;
            font-weight: 600;
            margin-top: 5px;
            color: #2ecc71;
        }
        
        .match-status.finished {
            color: #e74c3c;
        }
        
        .match-status.in-play {
            color: #f1c40f;
        }
        
        .no-matches {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
        }
        
        .no-matches i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.1);
        }
        
        .no-matches h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #ddd;
        }
        
        .no-matches p {
            color: #aaa;
            max-width: 500px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .date-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .date-btn {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .date-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .date-display {
            font-size: 1.1rem;
            font-weight: 600;
            min-width: 150px;
            text-align: center;
        }
        
        .error-details {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: left;
            font-family: monospace;
            font-size: 0.9rem;
            color: #ff9e9e;
            max-width: 500px;
            margin: 20px auto 0;
            overflow-x: auto;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #777;
            font-size: 0.9rem;
        }
        
        .api-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-family: monospace;
            word-break: break-all;
            font-size: 0.8rem;
            color: #aaa;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .matches-container {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-futbol"></i> Live Football Matches</h1>
            <p class="subtitle">Real-time scores and match information from Football-Data.org</p>
            
            <div class="controls">
                <button class="btn active" id="todayBtn">
                    <i class="fas fa-calendar-day"></i> Today's Matches
                </button>
                <button class="btn" id="yesterdayBtn">
                    <i class="fas fa-calendar-minus"></i> Yesterday
                </button>
                <button class="btn" id="tomorrowBtn">
                    <i class="fas fa-calendar-plus"></i> Tomorrow
                </button>
                <button class="btn" id="liveBtn">
                    <i class="fas fa-play-circle"></i> Live Matches
                </button>
                <button class="btn" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            
            <div class="date-controls">
                <button class="date-btn" id="prevDayBtn">
                    <i class="fas fa-chevron-left"></i> Previous Day
                </button>
                <div class="date-display" id="currentDateDisplay">Today</div>
                <button class="date-btn" id="nextDayBtn">
                    Next Day <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <div class="status-indicator">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">Click "Today's Matches" to load data</span>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="matches-container" id="matchesContainer">
            <!-- Matches will be loaded here -->
            <div class="no-matches">
                <i class="fas fa-futbol"></i>
                <h3>Welcome to Football Matches</h3>
                <p>Select an option above to load matches from Football-Data.org API.</p>
            </div>
        </div>
        
        <footer>
            <p>Football data provided by Football-Data.org API</p>
            <div class="api-info">
                API Key: 5ec9c1be687b41e1821b57eff0f9ec16<br>
                Endpoint: https://api.football-data.org/v4/matches
            </div>
        </footer>
    </div>

    <script>
        // API Configuration for Football-Data.org
        const API_KEY = '5ec9c1be687b41e1821b57eff0f9ec16';
        const API_BASE_URL = 'https://api.football-data.org/v4';
        
        // DOM Elements
        const matchesContainer = document.getElementById('matchesContainer');
        const statusDot = document.getElementById('statusDot');
        const statusText = document.getElementById('statusText');
        const todayBtn = document.getElementById('todayBtn');
        const yesterdayBtn = document.getElementById('yesterdayBtn');
        const tomorrowBtn = document.getElementById('tomorrowBtn');
        const liveBtn = document.getElementById('liveBtn');
        const refreshBtn = document.getElementById('refreshBtn');
        const prevDayBtn = document.getElementById('prevDayBtn');
        const nextDayBtn = document.getElementById('nextDayBtn');
        const currentDateDisplay = document.getElementById('currentDateDisplay');
        
        // State
        let currentFilter = 'today';
        let currentDate = new Date();
        let isCustomDate = false;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateDateDisplay();
        });
        
        function setupEventListeners() {
            todayBtn.addEventListener('click', () => {
                setActiveButton('todayBtn');
                currentFilter = 'today';
                isCustomDate = false;
                currentDate = new Date();
                updateDateDisplay();
                loadMatches();
            });
            
            yesterdayBtn.addEventListener('click', () => {
                setActiveButton('yesterdayBtn');
                currentFilter = 'yesterday';
                isCustomDate = false;
                currentDate = new Date();
                currentDate.setDate(currentDate.getDate() - 1);
                updateDateDisplay();
                loadMatches();
            });
            
            tomorrowBtn.addEventListener('click', () => {
                setActiveButton('tomorrowBtn');
                currentFilter = 'tomorrow';
                isCustomDate = false;
                currentDate = new Date();
                currentDate.setDate(currentDate.getDate() + 1);
                updateDateDisplay();
                loadMatches();
            });
            
            liveBtn.addEventListener('click', () => {
                setActiveButton('liveBtn');
                currentFilter = 'live';
                isCustomDate = false;
                updateDateDisplay();
                loadMatches();
            });
            
            refreshBtn.addEventListener('click', () => {
                loadMatches();
            });
            
            prevDayBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() - 1);
                isCustomDate = true;
                updateDateDisplay();
                loadMatches();
            });
            
            nextDayBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() + 1);
                isCustomDate = true;
                updateDateDisplay();
                loadMatches();
            });
        }
        
        function setActiveButton(activeId) {
            [todayBtn, yesterdayBtn, tomorrowBtn, liveBtn].forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Only set active if it's one of the main filter buttons
            if (activeId !== 'custom') {
                document.getElementById(activeId).classList.add('active');
            }
        }
        
        function formatDateForAPI(date) {
            return date.toISOString().split('T')[0]; // YYYY-MM-DD
        }
        
        function formatDateForDisplay(date) {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            if (date.toDateString() === today.toDateString()) {
                return 'Today';
            } else if (date.toDateString() === tomorrow.toDateString()) {
                return 'Tomorrow';
            } else if (date.toDateString() === yesterday.toDateString()) {
                return 'Yesterday';
            } else {
                return date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            }
        }
        
        function updateDateDisplay() {
            currentDateDisplay.textContent = formatDateForDisplay(currentDate);
            
            // If we're on a custom date, highlight that we're not using a preset
            if (isCustomDate) {
                setActiveButton('custom');
            }
        }
        
        async function loadMatches() {
            updateStatus('loading', 'Loading matches data from API...');
            
            try {
                let endpoint = `${API_BASE_URL}/matches`;
                let params = '';
                
                // Set parameters based on filter
                if (currentFilter === 'live') {
                    params = '?status=LIVE';
                } else {
                    // For date-based filters, use the currentDate
                    const dateStr = formatDateForAPI(currentDate);
                    params = `?date=${dateStr}`;
                }
                
                const response = await fetch(`${endpoint}${params}`, {
                    headers: {
                        'X-Auth-Token': API_KEY,
                        'Accept': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`API Error: ${response.status} - ${response.statusText}`);
                }
                
                const data = await response.json();
                
                if (data.matches && data.matches.length > 0) {
                    displayMatches(data.matches);
                    updateStatus('success', `Loaded ${data.matches.length} matches`);
                } else {
                    showNoMatchesMessage();
                    updateStatus('success', 'No matches found');
                }
                
            } catch (error) {
                console.error('Error loading matches:', error);
                showErrorMessage(`API Error: ${error.message}`, error);
                updateStatus('error', `Error: ${error.message}`);
            }
        }
        
        function displayMatches(matches) {
            matchesContainer.innerHTML = '';
            
            // Sort matches: live first, then by competition importance
            matches.sort((a, b) => {
                // Live matches first
                if (a.status === 'LIVE' && b.status !== 'LIVE') return -1;
                if (a.status !== 'LIVE' && b.status === 'LIVE') return 1;
                
                // Then by competition tier (lower tier = more important)
                const tierA = a.competition?.plan || 99;
                const tierB = b.competition?.plan || 99;
                return tierA - tierB;
            });
            
            matches.forEach(match => {
                const matchCard = createMatchCard(match);
                matchesContainer.appendChild(matchCard);
            });
        }
        
        function createMatchCard(match) {
            const card = document.createElement('div');
            card.className = 'match-card';
            
            if (match.status === 'LIVE' || match.status === 'IN_PLAY') {
                card.classList.add('live');
            }
            
            const competition = match.competition || {name: 'Unknown Competition', emblem: ''};
            const homeTeam = match.homeTeam || {name: 'Home Team', shortName: 'Home', tla: 'HOM', crest: ''};
            const awayTeam = match.awayTeam || {name: 'Away Team', shortName: 'Away', tla: 'AWY', crest: ''};
            const score = match.score || {fullTime: {home: null, away: null}};
            
            // Format match time
            let matchTime = 'Time TBD';
            let matchDateFormatted = 'Date TBD';
            
            if (match.utcDate) {
                try {
                    const matchDate = new Date(match.utcDate);
                    matchTime = matchDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', timeZoneName: 'short' });
                    matchDateFormatted = matchDate.toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric' });
                } catch (e) {
                    console.warn('Invalid date format:', match.utcDate);
                }
            }
            
            // Determine status text
            let statusText = match.status || 'SCHEDULED';
            let statusClass = '';
            
            if (match.status === 'FINISHED') {
                statusText = 'FT';
                statusClass = 'finished';
            } else if (match.status === 'IN_PLAY' || match.status === 'LIVE') {
                statusText = `${match.minute || 'Live'}'`;
                statusClass = 'in-play';
            } else if (match.status === 'PAUSED') {
                statusText = 'HT';
            } else if (match.status === 'SCHEDULED') {
                statusText = 'Scheduled';
            } else if (match.status === 'POSTPONED') {
                statusText = 'Postponed';
                statusClass = 'finished';
            } else if (match.status === 'CANCELLED') {
                statusText = 'Cancelled';
                statusClass = 'finished';
            }
            
            // Get score or vs for scheduled matches
            let scoreDisplay = 'VS';
            if (match.status === 'FINISHED' || match.status === 'IN_PLAY' || match.status === 'LIVE' || match.status === 'PAUSED') {
                const homeScore = score.fullTime?.home !== null && score.fullTime?.home !== undefined ? score.fullTime.home : 0;
                const awayScore = score.fullTime?.away !== null && score.fullTime?.away !== undefined ? score.fullTime.away : 0;
                scoreDisplay = `${homeScore} - ${awayScore}`;
            }
            
            card.innerHTML = `
                <div class="competition">
                    <img src="${competition.emblem || 'https://via.placeholder.com/30x30/333/fff?text=?'}" alt="${competition.name} emblem" onerror="this.src='https://via.placeholder.com/30x30/333/fff?text=?'">
                    <span class="competition-name">${competition.name}</span>
                </div>
                
                <div class="match-details">
                    <div class="team">
                        <img src="${homeTeam.crest || 'https://via.placeholder.com/60x60/333/fff?text=?'}" alt="${homeTeam.name} logo" class="team-logo" onerror="this.src='https://via.placeholder.com/60x60/333/fff?text=?'">
                        <div class="team-name">${homeTeam.shortName || homeTeam.name}</div>
                        <div class="team-code">${homeTeam.tla || homeTeam.name.substring(0, 3).toUpperCase()}</div>
                    </div>
                    
                    <div class="score">${scoreDisplay}</div>
                    
                    <div class="team">
                        <img src="${awayTeam.crest || 'https://via.placeholder.com/60x60/333/fff?text=?'}" alt="${awayTeam.name} logo" class="team-logo" onerror="this.src='https://via.placeholder.com/60x60/333/fff?text=?'">
                        <div class="team-name">${awayTeam.shortName || awayTeam.name}</div>
                        <div class="team-code">${awayTeam.tla || awayTeam.name.substring(0, 3).toUpperCase()}</div>
                    </div>
                </div>
                
                <div class="match-time">${matchDateFormatted} â€¢ ${matchTime}</div>
                <div class="match-status ${statusClass}">
                    ${statusText}
                </div>
            `;
            
            return card;
        }
        
        function showNoMatchesMessage() {
            let message = '';
            
            if (currentFilter === 'live') {
                message = 'There are currently no live matches.';
            } else {
                const dateStr = formatDateForDisplay(currentDate);
                message = `No matches found for ${dateStr}.`;
            }
            
            matchesContainer.innerHTML = `
                <div class="no-matches">
                    <i class="fas fa-futbol"></i>
                    <h3>No matches found</h3>
                    <p>${message}</p>
                </div>
            `;
        }
        
        function showErrorMessage(message, error) {
            matchesContainer.innerHTML = `
                <div class="no-matches">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Error loading matches</h3>
                    <p>${message}</p>
                    
                    <div class="error-details">
                        <strong>Error details:</strong><br>
                        ${error.toString()}
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn" id="retryBtn">
                            <i class="fas fa-redo"></i> Retry
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('retryBtn').addEventListener('click', () => {
                loadMatches();
            });
        }
        
        function updateStatus(status, message) {
            statusText.textContent = message;
            
            // Remove all status classes
            statusDot.classList.remove('active');
            
            if (status === 'loading') {
                statusDot.style.background = '#f1c40f';
                statusDot.style.animation = 'pulse 1.5s infinite';
            } else if (status === 'success') {
                statusDot.classList.add('active');
                statusDot.style.background = '#2ecc71';
                statusDot.style.animation = 'none';
            } else if (status === 'error') {
                statusDot.style.background = '#e74c3c';
                statusDot.style.animation = 'pulse 1.5s infinite';
            }
        }
    </script>
</body>
</html>